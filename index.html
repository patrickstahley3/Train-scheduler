<!DOCTYPE html>
<html lang="en">
​

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/style.css">
    ​
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    ​

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    ​

    <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-app.js"></script>
    ​

    <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-database.js"></script>
    ​
</head>
​

<body>
    <div class="container">
        ​
        <div class="row headerRow">
            <p class="headerText col-md-8">Train schedule</p>
            <div class="col-md-4 currentTimeDisplay">Current time: <span id="clockDisplay"></span></div>
        </div>
        ​
        <div class="row scheduleRow">
            <div class="card" id="trainDisplay" style="width: 100%; padding-bottom: 25px">
                <div class="card-header">Current Train Schedule: </div>
                <div class="row titleRow trainInfoRow">
                    <div class="col-md-3">Train name</div>
                    <div class="col-md-3">Destination</div>
                    <div class="col-md-2">Frequency (min)</div>
                    <div class="col-md-2">Next arrival (PST)</div>
                    <div class="col-md-2">Minutes away</div>
                </div>
                ​
            </div>
        </div>
        ​
        <div class="row addRow">
            <div class="card" style="width: 100%; margin-top: 2%; padding-bottom: 15px; margin-bottom: 25px;">
                <div class="card-header">Add train: </div>
                <div class="row">
                    <form class="inputContent" style="margin-top: 20px;">
                        <div class="form-group">
                            <label for="inputName" class="inputLabel">Train name: </label>
                            <input type="text" class="form-control" id="inputName">
                        </div>
                    </form>
                </div>
                <div class="row">
                    <form class="inputContent">
                        <div class="form-group">
                            <label for="inputDestination" class="inputLabel">Destination: </label>
                            <input type="text" class="form-control" id="inputDestination">
                        </div>
                    </form>
                </div>
                <div class="row">
                    <form class="inputContent">
                        <div class="form-group">
                            <label for="inputTime" class="inputLabel">First train time (HH:mm): </label>
                            <input type="text" class="form-control" id="inputTime">
                        </div>
                    </form>
                </div>
                <div class="row">
                    <form class="inputContent">
                        <div class="form-group">
                            <label for="inputFrequency" class="inputLabel">Frequency (min): </label>
                            <input type="text" class="form-control" id="inputFrequency">
                        </div>
                    </form>
                </div>
                <div class="row buttonRow">
                    <div class="col-md-3">
                        <button id="submitButton">Submit</button>
                    </div>
                </div>
            </div>

        </div>

        <script>
            var firebaseConfig = {
                apiKey: "AIzaSyAZvbG1nGK_RMDHX54iAoaxbKM8qms5hKQ",
                authDomain: "project-1-27d53.firebaseapp.com",
                databaseURL: "https://project-1-27d53.firebaseio.com",
                projectId: "project-1-27d53",
                storageBucket: "",
                messagingSenderId: "500374334906",
                appId: "1:500374334906:web:b6f2d7f3e0bc2ad6b14183"
            };

            firebase.initializeApp(firebaseConfig);

            var database = firebase.database();
            var trainName = "";
            var destination = "";
            var FrequencyMin = "";
            var nextArrivalPst = "";
            var minutesAway = "";

            $("#submitButton").on("click", function () {
                trainName = $("#inputName").val().trim();
                destination = $("#inputDestination").val().trim();
                nextArrivalPst = $("#inputTIme").val().trim();
                minutesAwat = parseInt($("#inputDestination").val().trim());
                console.log(trainName, destination, minutesAway, frequency);
                if (name != "" && role != "" && /^\d{2}\/\d{2}\/\d{4}$/.test(date) && !Number.isNaN(rate)) {
                    minutesAway = Math.floor(moment(new Date()).diff(moment(date), 'months', true));
                    console.log(minutesAway);
                    extArrivalPs = minutesAway * rate;
                } else {
                    alert("Data input incorrect");
                }
            });

            database.ref().on(
                "child_added",
                function (snapshot) {
                    console.log(snapshot.val())

                    var newDiv = $("<div>")
                    newDiv.addClass("row")
                    newDiv.addClass("trainInfoRow")
                    var trainNameDiv = $("<div>")
                    nameDiv.text(snapshot.val(). trainName);
                    trainNameDiv.addClass("col-md-2")
                    newDiv.append(nameDiv)
                    var destinationDiv = $("<div>")
                    destinationDiv.text(snapshot.val().destination);
                    destinationDiv.addClass("col-md-2")
                    newDiv.append(roleDiv)
                    var FrequencyMinDiv = $("<div>")
                    FrequencyMinDiv.text(snapshot.val().FrequencyMin);
                    FrequencyMinDiv.addClass("col-md-2")
                    newDiv.append(dateDiv)
                    var nextArrivalPstDiv = $("<div>")
                    nextArrivalPstDiv.text(snapshot.val().nextArrivalPst)
                    nextArrivalPstDiv.addClass("col-md-2")
                    newDiv.append(monthDiv)
                    var minutesAwayDiv = $("<div>")
                    minutesAwayDiv.text(snapshot.val().minutesAway);
                    minutesAwayDiv.addClass("col-md-2")
                    newDiv.append(minutesAwayDiv)
                    var totalDiv = $("<div>")
                  
                })

        </script>
        ​
        <script src="assets/javascript/app.js"></script>
</body>
​

</html>